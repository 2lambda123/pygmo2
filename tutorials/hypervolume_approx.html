

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Approximating the hypervolume &mdash; pygmo 2.16.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/logo_favico.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Benchmarking Extended Ant Colony Optimization on CEC2006 problems" href="cec2006_gaco_benchmark.html" />
    <link rel="prev" title="Advanced hypervolume computation and analysis" href="hypervolume_advanced.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pygmo
          

          
          </a>

          
            
            
              <div class="version">
                2.16.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Capabilities</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#coding-your-own-problem-udp">Coding your own problem (UDP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#meta-problems">Meta-problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#coding-your-own-island-udi">Coding your own island (UDI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#local-optimization">Local optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#multi-objective-optimization">Multi-objective optimization</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="tutorials.html#hypervolumes">Hypervolumes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hypervolume.html">Getting started with hypervolumes</a></li>
<li class="toctree-l3"><a class="reference internal" href="hypervolume_advanced.html">Advanced hypervolume computation and analysis</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Approximating the hypervolume</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fpras">FPRAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#approximation-of-the-least-contributor">Approximation of the least contributor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#advanced-examples">Advanced Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../known_issues.html">Known issues</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pygmo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="tutorials.html">Tutorials</a> &raquo;</li>
        
      <li>Approximating the hypervolume</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/hypervolume_approx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="approximating-the-hypervolume">
<span id="py-tutorial-hypervolume-approx"></span><h1>Approximating the hypervolume<a class="headerlink" href="#approximating-the-hypervolume" title="Permalink to this headline">¶</a></h1>
<p>Determining the hypervolume indicator is a computationally expensive task.
Even in case of a reasonably small dimension and low number of points (e.g. 100 points in 10 dimensions),
there are currently no known algorithms that can yield the results fast enough for use in
most multiple-objective optimizers.</p>
<p>In this tutorial we will show a way to compute the hypervolume indicator faster, but at the cost of accuracy.
Two algorithms are included in pygmo and are capable of computing the hypervolume approximately:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="../hv_utils.html#pygmo.bf_fpras" title="pygmo.bf_fpras"><code class="xref py py-class docutils literal notranslate"><span class="pre">bf_fpras</span></code></a> - capable of approximating the hypervolume indicator</p></li>
<li><p><a class="reference internal" href="../hv_utils.html#pygmo.bf_approx" title="pygmo.bf_approx"><code class="xref py py-class docutils literal notranslate"><span class="pre">bf_approx</span></code></a> - capable of approximating the least and the greatest contributor</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../population.html#pygmo.population" title="pygmo.population"><code class="xref py py-class docutils literal notranslate"><span class="pre">population</span></code></a> object will never delegate the computation to any of the approximated algorithms.
The only way to use the approximated algorithms is through the explicit request
(see the beginning of the tutorial <a class="reference internal" href="hypervolume_advanced.html#py-tutorial-hypervolume-advanced"><span class="std std-ref">Advanced hypervolume computation and analysis</span></a> for
more information on how to do that).</p>
</div>
<div class="section" id="fpras">
<h2>FPRAS<a class="headerlink" href="#fpras" title="Permalink to this headline">¶</a></h2>
<p>The class <a class="reference internal" href="../hv_utils.html#pygmo.bf_fpras" title="pygmo.bf_fpras"><code class="xref py py-class docutils literal notranslate"><span class="pre">bf_fpras</span></code></a> found in PyGMO is a Fully Polynomial-Time Randomized Approximation Scheme accustomed
for the computation of the hypervolume indicator. You can invoke the FPRAS as follows:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pygmo</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">problem</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">dtlz</span><span class="p">(</span><span class="n">prob_id</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fdim</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pop</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">population</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpras</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">bf_fpras</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hv</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">hypervolume</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">offset</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_point</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">refpoint</span><span class="p">(</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hv</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">hv_algo</span><span class="o">=</span><span class="n">fpras</span><span class="p">)</span> 
</pre></div>
</div>
<p>To influence the accuracy of the FPRAS, it is possible to provide the following keyword arguments to its constructor:</p>
<ol class="arabic simple">
<li><p><em>eps</em> - relative accuracy of the approximation</p></li>
<li><p><em>delta</em> - probability of error</p></li>
</ol>
<p>For given parameters <strong>eps=eps0</strong> and <strong>delta=delta0</strong>, the obtained solution is (with probability <strong>1 - delta0</strong>)
within a factor of <strong>1 +/- eps0</strong> from the exact hypervolume.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The smaller the <strong>eps</strong> and <strong>delta</strong>, the longer it will take for the algorithm to evaluate.</p>
</div>
<p>By the <em>relative</em> error, we mean the scenario in which the approximation is accurate within given order of
magnitude, e.g. 312.32 and 313.41, are accurate within <strong>eps = 0.1</strong>, because they are accurate within two
orders of magnitude. At the same time, these are NOT accurate within <strong>eps = 0.01</strong>.</p>
<div class="section" id="running-time">
<h3>Running time<a class="headerlink" href="#running-time" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/hv_fpras.png" class="align-center" src="../_images/hv_fpras.png" />
<p>The plots presents the measured running time (average and MAX out of 10) of FPRAS for varying <code class="docutils literal notranslate"><span class="pre">Front</span> <span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">Dimension</span></code>.
The algorithm is instantiated with <strong>eps=0.1</strong> and <strong>delta=0.1</strong>.
Notice the lack of any exponential increase in time as the dimension increases.</p>
<p>Since FPRAS scales so well with the dimension size, we can also present data for larger front sizes and number of objectives.</p>
<p>Now, that is quite a feat! A front of 1000 points in 100 dimensions would be beyond the reach of any of the algorithms
that rely on the exact computation.</p>
</div>
</div>
<div class="section" id="approximation-of-the-least-contributor">
<h2>Approximation of the least contributor<a class="headerlink" href="#approximation-of-the-least-contributor" title="Permalink to this headline">¶</a></h2>
<p>Additionally to FPRAS, pygmo provides an approximated algorithm dedicated for the computation of the least/greatest contributor.
This is useful when we want to utilize evolutionary algorithms which rely on that feature, especially when the
problems has many objectives.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Problem with 30 objectives and 300 individuals</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">problem</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">dtlz</span><span class="p">(</span><span class="n">prob_id</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">fdim</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">35</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pop</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">population</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">300</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hv_algo</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">bf_approx</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hv</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">hypervolume</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">offset</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_point</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">refpoint</span><span class="p">(</span><span class="n">offset</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hv</span><span class="o">.</span><span class="n">least_contributor</span><span class="p">(</span><span class="n">ref_point</span><span class="p">,</span> <span class="n">hv_algo</span><span class="o">=</span><span class="n">hv_algo</span><span class="p">)</span> 
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../hv_utils.html#pygmo.bf_approx" title="pygmo.bf_approx"><code class="xref py py-class docutils literal notranslate"><span class="pre">bf_approx</span></code></a> provides only two features - computation of the least and the greatest contributor.
Request for the computation of any other measure will raise and exception.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cec2006_gaco_benchmark.html" class="btn btn-neutral float-right" title="Benchmarking Extended Ant Colony Optimization on CEC2006 problems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hypervolume_advanced.html" class="btn btn-neutral float-left" title="Advanced hypervolume computation and analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, pagmo development team

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>